# 🎄 미션 - 크리스마스 프로모션

## 📌 기능 구현 목록

1. 이벤트 진행을 위한 Controller인 *ChristmasController.class* 을 생성한다.
2. 이벤트를 시작한다.
    1. 12월 중 식당 예상 방문 날짜를 입력한다. (날짜는 숫자만 입력받는다.)
    2. 주문할 메뉴의 이름과 개수를 입력한다.(단일 메뉴: `이름-개수`, 복수 메뉴:`이름-개수,이름-개수`)
       1. 음료만 주문 시, 주문할 수 없다.
       2. 메뉴는 최대 20개까지만 주문이 가능하다. (메뉴의 개수 총합 기준)
    3. 주문 메뉴 리스트를 출력한다. (메뉴이름과 갯수는 공백으로 구분한다.)
    4. 할인 전 총주문 금액을 출력한다. (단위는 `원`단위로, 숫자 3자리 마다 쉼표`,`로 구분한다.)
   #### 총주문 금액 10,000원 이상부터 이벤트가 적용된다.
    5. 증정 메뉴를 출력한다.
        1. 증정 메뉴는 `증정 이벤트`를 반영한다.
            - 할인 전 총주문 금액이 12만 원 이상일 때, **샴페인 1개** 증정한다.
            - 샴페인의 가격은 메뉴표를 참고하여 25,000원으로 책정한다.
            - 증정 메뉴가 없을 경우 `없음`으로 출력한다.
    6. 혜택 내역을 출력한다.
       - 혜택 내역이 없을 경우 `없음`으로 출력한다.
       1. `혜택명: 할인금액`을 출력한다. (크리스마스 디데이 할인: -1,200원)
       2. 혜택 내역은 `12월 이벤트 계획`를 반영한다.
          - 크리스마스 디데이 할인
            - 이벤트 기간: **2023.12.1 ~ 2023.12.25**
              1,000원으로 시작하여 크리스마스가 다가올수록 날마다 할인 금액이 100원씩 증가
          - 평일 할인(일요일~목요일)
            - 평일에는 **디저트 메뉴**를 메뉴 1개당 2,023원 할인
          - 주말 할인(금요일, 토요일)
            - 주말에는 **메인 메뉴**를 메뉴 1개당 2,023원 할인
          - 특별 할인
            - 이벤트 달력에 별이 있으면 총주문 금액에서 1,000원 할인
            - 별이 있는 날짜는 매주 일요일 (*3, 10, 17, 24, 31*)과 크리스마스(*25*)이다.
          - 증정 이벤트
            - 할인 전 총주문 금액이 12만 원 이상일 때, 샴페인 1개 증정
       3. 이벤트 기간: `크리스마스 디데이 할인`을 제외한 다른 이벤트는 `2023.12.1 ~ 2023.12.31` 동안 적용
    7. 총혜택 금액을 출력한다.(단위는 `원`단위로, 숫자 3자리 마다 쉼표`,`로 구분한다.)
       - 총혜택 금액이 0원일 경우 `0원`으로 출력한다.
       1. 총혜택 금액 = 할인 금액의 합계 + 증정 메뉴의 가격
    8. 할인 후 예상 결제 금액을 출력한다. 
       1. 할인 후 예상 결제 금액 = 할인 전 총주문 금액 - 할인 금액
    9. 12월 이벤트 배지를 출력한다.
       - 이벤트 배지가 부여되지 않는 경우, `없음`으로 출력한다.
       - 5천 원 이상: 별
       - 1만 원 이상: 트리
       - 2만 원 이상: 산타
        
- Domain에 *Lotto*와 *Referee*를 두어 각 객체가 자신의 책임을 가지고, 그 책임을 수행하는 로직을 객체 안에 구현한다.
  #### Referee
    - Referee는 당첨 번호, 보너스 번호, 로또 랭킹리스트, 수익률 필드 변수를 가지는 로또 결과 계산의 책임을 가지는 도메인이다.
    - 필드 변수에 따른 랭킹 인원 증가 계산, 수익률 계산 등의 로직을 구현한다.
        - 수익률 계산시 합산 값의 Data type은 long으로 구현한다.(정수 오버플로우 발생 방지)
  #### RefereeService
    - RefereeService는 Referee의 비즈니스 로직을 담당할 수 있는 계층으로 책임을 가진다.
        - 로또 등수를 계산하는 로직을 구현한다.
            - 당첨번호가 일치하는 개수는?
            - 보너스 번호가 일치하는가?
        - 로또 당첨결과의 랭킹을 산출하는 로직
            - 당첨번호와 보너스 번호의 일치하는 갯수에 따라 랭킹을 정한다.
  #### Lotto
    - Lotto는 자신의 로또 번호 6자리만을 가진다.

  #### LottoService
    - LottoService는 Lotto의 비즈니스 로직을 담당할 수 있는 계층으로 책임을 가진다.
        - 구매금액에 따른 로또 구매수량을 계산해 List\<Lotto>로 만든다.
        - 1 ~ 45 사이의 무작위 값 6개를 중복없이 구한다.
  #### InputView
    - 사용자의 입력 로직을 처리한다.
  #### OutputView
    - Controller의 출력 로직을 처리한다.

  #### EnumType
    - 로또 번호는 Lotto Enum Type으로 분류한다.
    - 랭킹, 수익률 등 결과 산출과 관련된 상수는 Referee Enum Type으로 분류한다.


- *Model*, *View*, *Controller*로 3개로 나누어 *MVC* 패턴으로 기능을 구현한다.
    - *util*, *parsing*, *constant* 등 *MVC*로 분류하기 어렵다면 디렉토리 경로를 분리한다.
## 📌 예외처리 목록

- 예외는 Exception이 아닌 IllegalArgumentException, IllegalStateException 등과 같은 명확한 유형을 처리한다.
- 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException를 발생시키고, `[ERROR]`로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
    - 예외발생 시 Application가 종료되어선 안 된다.
- 로또 번호
    - 로또 번호는 `,`로 구분을 하며, 숫자 이외에 다른 값을 입력받을 수 없다.
    - 1 ~ 45 사이의 숫자여야 한다.
    - 로또 번호는 6개여야 한다.
    - 로또 번호가 중복된 숫자일 경우 예외 처리한다.
- 보너스 번호
    - 보너스 번호는 숫자이외 다른 값을 입력받을 수 없다.
    - 보너스 번호 1개가 로또 당첨 번호 6개 중 하나라도 중복일 경우 예외 처리한다.
- 구입 금액
    - 1,000원 단위로 입력 받으며 1,000원으로 나누어 떨어지지 않는 경우 예외 처리한다.
    - 0원 또는 음수일 경우 예외 처리한다.
- Referee
    - 1등 ~ 5등 사이의 랭킹이 아닐 경우 IllegalStateException() 예외처리한다.
    - 수익률 계산 시 로또 구매 금액이 0이하일 경우, DivideByZeroException() 처리 전 IllegalArgumentException() 예외처리한다.

## 📌 테스트 검증

#### 비즈니스 로직
- 로또 번호 무작위 값을 생성할 때 1 ~ 45 사이의 값이 생성이 되는가?
- 구매금액만큼 로또 수량이 발급되는가?
- 로또 당첨 번호와 로또 번호 중 n개 일치할 경우 n개가 카운팅 되는가?
- 보너스 번호와 로또 번호 중 n개 일치할 경우 보너스 번호 일치가 정상적으로 동작하는가?
- 수익률이 소숫점 첫째자리 반올림으로 정확하게 계산되는가?
- 맞춘 갯수 만큼 랭킹 등수가 정확하게 산정되는가?
- IllegalArgumentException이 발생하는가?
    - 로또 당첨 번호 입력 시 1 이상 45 이하 숫자가 아닌 다른 값을 입력했을 경우
    - 로또 당첨 번호 입력 시 숫자 갯수가 6개가 아닌 경우
    - 로또 당첨 번호 입력 시 숫자가 중복인 경우
    - 보너스 번호 입력 시 로또 당첨 번호 6개 중 중복인 경우
    - 공백 입력 시 예외가 발생
    - 숫자가 아닌 특수문자, 문자 등을 입력했을 경우
- 로또 당첨 번호 입력 시 `,`로 구분이 되어지는가?
#### 도메인 로직
- Lotto
    - 로또 번호 생성 시 1 이상 45 이하 숫자가 아닌 다른 값을 입력했을 경우
    - 로또 번호 생성 시 숫자 갯수가 6개가 아닌 경우
    - 로또 번호 생성 시 숫자가 중복인 경우
- Referee
    - IllegalStateException이 발생하는가?
        - 랭킹에 맞지 않은 인덱스 값이 포함되는 경우
    - 수익률 계산 시 분모 값(로또 금액)이 0으로 계산될 경우 예외가 발생한다. 



